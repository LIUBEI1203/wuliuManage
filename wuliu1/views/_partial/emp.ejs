    <link href="/ligerUI/skins/Aqua/css/ligerui-all.css" rel="stylesheet" type="text/css"> 
  <link href="/ligerUI/skins/Gray/css/all.css" rel="stylesheet" type="text/css"> 
  <script src="/javascripts/jquery-2.1.0.min.js" type="text/javascript"></script>
    <script src="/javascripts/json2.js" type="text/javascript"></script>
    <script src="/javascript/jquery.json.js" type="text/javascript"></script>
   <script src="/ligerUI/js/core/base.js" type="text/javascript"></script>
  <script src="/ligerUI/js/plugins/ligerForm.js" type="text/javascript"></script>
  <script src="/ligerUI/js/plugins/ligerDateEditor.js" type="text/javascript"></script>
  <script src="/ligerUI/js/plugins/ligerComboBox.js" type="text/javascript"></script>
  <script src="/ligerUI/js/plugins/ligerCheckBox.js" type="text/javascript"></script>
  <script src="/ligerUI/js/plugins/ligerButton.js" type="text/javascript"></script>
  <script src="/ligerUI/js/plugins/ligerDialog.js" type="text/javascript"></script>
  <script src="/ligerUI/js/plugins/ligerRadio.js" type="text/javascript"></script>
  <script src="/ligerUI/js/plugins/ligerSpinner.js" type="text/javascript"></script>
  <script src="/ligerUI/js/plugins/ligerTextBox.js" type="text/javascript"></script>  
  <script src="/ligerUI/js/plugins/ligerGrid.js" type="text/javascript"></script>  
    <script type="text/javascript"> 
      var groupicon = "/ligerUI/skins/icons/communication.gif";
    $(function ()
    { 
            var emp = $("#emp").val();
            var empData = JSON.parse(emp);

            if (empData.job=="快递员") {
                var deliverData = $("#deliver").val();
                var deliver = JSON.parse(deliverData);
                if (deliver.code==500) {
                    $.ligerDialog.error(deliver.mes);
                };

                $("#form3").ligerForm({
                    inputWidth: 170, labelWidth: 110, data:deliver.data , fields: [
                        { display: "负责区域 ", name: "responArea", newline: true, type: "text" , group: "职工信息", groupicon: groupicon },
                        { display: "派件票数 ", name: "派件票数", newline: true, type: "digits", width: 170},
                        { display: "所属网点 ", name: "所属网点", newline: true, type: "text" },
                        { display: "收件票数 ", name: "收件票数", newline: true, type: "digits" }
                    ]
                });

            };
            
            if (empData.job=="司机") {
                var driverData = $("#driver").val();
                var driver = JSON.parse(driverData);
                if (driver.code==500) {
                    $.ligerDialog.error(driver.mes);
                };

                $("#form4").ligerForm({
                    inputWidth: 170, labelWidth: 110, data: driver.data, fields: [
                        { display: "驾照类型 ", name: "licenseType", newline: true, type: "text" , group: "职工信息", groupicon: groupicon }
                   
                    ]
                });
            };
           

          //创建表单结构 
          $("#form2").ligerForm({
              inputWidth: 170, labelWidth: 110, data: empData,
              fields: [ 
                    { display: "员工编号 ", name: "empId", newline: true, type: "text" , group: "基础信息", groupicon: groupicon, validate:{required:true }},
                    { display: "姓名 ", name: "empName", newline: true, type: "text", width: 170},
                    { display: "电话 ", name: "empPhone", newline: true, type: "text" },
                    { display: "性别 ", name: "gender",  placeholder: "男",
                        newline: false, type: "combobox", editor: {
                            data: [
                                { type: '男', id: '男' },
                                { type: '女', id: '女' }
                            ],
                            value: '男',
                            textField: 'type',
                            selectBoxWidth: 100
                        }
                    },
                    { display: "出生日期", name: "empBirth", newline: true, type: "date" ,width:110, validate:{required:true } },
                    { display: "入职日期", name: "entryDate", newline: true, type: "date" ,width:110 },
                    { display: "职位 ", name: "job", 
                            newline: false, type: "combobox", editor: {
                                data: [
                                    { type: '快递员', id: '快递员' },
                                    { type: '司机', id: '司机' },
                                    { type: '会计', id: '会计' },
                                    { type: '客服', id: '客服' }
                                ],
                                value: '快递员',
                                textField: 'type',
                                selectBoxWidth: 100
                            }
                    },
                    { display: "银行" ,name: "depositbank2", newline: true, type: "text" },
                    { display: "银行帐号" ,name: "account", newline: true, type: "text" },

                    { display: "学历", name: "eduDegree", newline: false, type: "combobox", editor:{
                        data: [
                            { type: '大专', id: '大专'},
                            { type: '本科', id: '本科'},
                            { type: '硕士', id: '硕士'}
                        ],
                        value: '大专',
                        textField :'type',
                        selectBoxWidth:80
                        } 
                    },
                    { display: "邮箱", name: "email", newline: true, type: "text" },
                    { display: "QQ", name: "empqq", newline: true, type: "text" },
                    { display: "毕业院校" ,name: "school", newline: true, type: "text" },
                    { display: "家庭住址" ,name: "home", newline: true, type: "text", width: 300 },
                    { display: "政治面貌", name: "political", newline: false, type: "combobox", editor:{
                        data: [
                            { type: '群众', id: '群众'},
                            { type: '党员', id: '党员'}
                        ],
                        value: '群众',
                        textField :'type',
                        selectBoxWidth:80
                        } 
                    },
                    { display: "民族", name: "ethnic", newline: false, type: "text" },
                    { display: "身份证号", name: "creditid", newline: false, type: "text" },
                    { display: "婚姻", name: "marital", newline: false, type: "combobox", editor:{
                        data: [
                            { type: '未婚', id: '未婚'},
                            { type: '已婚', id: '已婚'}
                        ],
                        value: '未婚',
                        textField :'type',
                        selectBoxWidth:80
                        } 
                    },
                    { display: "登录密码", name: "empPassword", newline: true, type: "password", validate:{required:true } }
              ]
          }); 
             
           

            
    
            $("#submitBtn").click(function(){
                // var data={};
                // data.empId=$("input[name='empId']").val();
                // data.empName=$("input[name='empName']").val();
      
                var form = liger.get("form2");
                var data = form.getData();
                // alert("formData:"+data);
                // alert("liger.toJSON:"+liger.toJSON(data));

                if (data.job=="快递员") {
                    data.responArea=$("input[name='responArea']").val();
                    data.派件票数=$("input[name='派件票数']").val();
                    data.所属网点=$("input[name='所属网点']").val();
                    data.收件票数=$("input[name='收件票数']").val();
                };
                if (data.job=="司机") {
                    data.licenseType=$("input[name='licenseType']").val();
                };
                if ((!data.empId)||(!data.empBirth)||(!data.empPassword)) {
                    alert("*为必填项！");
                };
                if (data.empId && data.empBirth && data.empPassword) {
                    $.post("/emp/update", data, updateCallBack, "json");
                };
            })
            
            function updateCallBack(data){
                var temp= data.data;
                if(temp.code==200){
                    $.ligerDialog.success(temp.mes);
                }
                else if(temp.code==500)
                {
                    $.ligerDialog.error(temp.mes);
                }
            }
      });  
 </script> 


<div class="header">
    <h1 class='article-title'>员工信息</h1>
    <h2>部门：<%= emp.deptId %></h2>
</div>

<div style="padding:50px">
    <div id="form2"></div>
    <% if (emp.job=="司机") {
        %>
        <div id="form4" ></div>
        <input style="display:none;" name="driver" id="driver" value=<%= JSON.stringify(driver) %> />
        <%
    }if (emp.job=="快递员") {
        %>
        <div id="form3" ></div>
        <input style="display:none;" name="deliver" id="deliver" value=<%= JSON.stringify(deliver) %> />
        <%
    };%>
    <input type="button" value="更新" id="submitBtn" class="pure-button-primary button-my pure-button" />
        <a class="pure-link" href="/empManage"><button class="pure-button-primary button-my pure-button">返回</button></a>
    </div>

    <div style="display:none;">
        <!-- g data total ttt -->
        <input name="emp" id="emp" value=<%= JSON.stringify(emp) %> />
    </div>
</div>
